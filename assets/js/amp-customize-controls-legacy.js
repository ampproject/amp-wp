!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=9)}({0:function(e,t){!function(){e.exports=this.wp.i18n}()},9:function(e,t,a){"use strict";a.r(t);var i,n,o,l=a(0);window.ampCustomizeControls=(i=wp.customize,n=jQuery,o={data:{queryVar:"amp",panelId:"",ampUrl:"",l10n:{unavailableMessage:"",unavailableLinkText:""}},tooltipTimeout:5e3,tooltipVisible:new i.Value(!1),tooltipFocused:new i.Value(0),boot:function(e){function t(){i.panel(o.data.panelId,o.panelReady)}o.data=e,i.state?(o.addState(),i.bind("ready",t)):i.bind("ready",(function(){o.addState(),t()}))},addState:function(){i.state.add("ampEnabled",new i.Value(!1)),i.state.add("ampAvailable",new i.Value(!1))},isAmpUrl:function(e){var t=document.createElement("a"),a=new RegExp("\\/"+o.data.queryVar+"\\/?$");return t.href=e,!_.isUndefined(wp.customize.utils.parseQueryString(t.search.substr(1))[o.data.queryVar])||a.test(t.pathname)},unampifyUrl:function(e){var t=document.createElement("a"),a=new RegExp("\\/"+o.data.queryVar+"\\/?$");if(t.href=e,t.pathname=t.pathname.replace(a,""),1<t.search.length){var i=window.wp.customize.utils.parseQueryString(t.search.substr(1));delete i[o.data.queryVar],t.search=n.param(i)}return t.href},ampifyUrl:function(e){var t=document.createElement("a");return t.href=o.unampifyUrl(e),t.search.length&&(t.search+="&"),t.search+=o.data.queryVar+"=1",t.href},tryToCloseTooltip:function(){clearTimeout(o.tooltipTimeoutId),o.tooltipTimeoutId=setTimeout((function(){o.tooltipVisible.get()&&(0<o.tooltipFocused.get()?o.tryToCloseTooltip():o.tooltipVisible.set(!1))}),o.tooltipTimeout)},setCurrentAmpUrl:function(e){var t=i.state("ampEnabled").get();return!t&&o.isAmpUrl(e)?o.unampifyUrl(e):t&&!o.isAmpUrl(e)?o.ampifyUrl(e):e},updatePreviewUrl:function(){i.previewer.previewUrl.set(o.setCurrentAmpUrl(i.previewer.previewUrl.get()))},enableAndNavigateToUrl:function(e){i.state("ampEnabled").set(!0),i.previewer.previewUrl.set(e)},updatePanelNotifications:function(){var e=i.panel(o.data.panelId),t=e.sections().concat([e]);i.state("ampAvailable").get()?_.each(t,(function(e){e.notifications.remove("amp_unavailable")})):_.each(t,(function(e){e.notifications.add(new i.Notification("amp_unavailable",{message:o.data.l10n.unavailableMessage,type:"info",linkText:o.data.l10n.unavailableLinkText,url:o.data.ampUrl,templateId:"customize-amp-unavailable-notification",render:function(){var e=i.Notification.prototype.render.call(this);return e.find("a").on("click",(function(e){e.preventDefault(),o.enableAndNavigateToUrl(this.href)})),e}}))}))},panelReady:function(e){var t,a=n(wp.template("customize-amp-enabled-toggle")({message:o.data.l10n.unavailableMessage,linkText:o.data.l10n.unavailableLinkText,url:o.data.ampUrl})),r=a.find("input[type=checkbox]"),s=a.find(".tooltip"),u=s.find("a");e.expanded.bind((function(t){t&&(i.state("ampAvailable").get()?i.state("ampEnabled").set(e.expanded.get()):e.notifications||setTimeout((function(){o.tooltipVisible.set(!0)}),250))})),e.notifications&&(i.state("ampAvailable").bind(o.updatePanelNotifications),o.updatePanelNotifications(),i.section.bind("add",o.updatePanelNotifications)),i.previewer.bind("amp-status",(function(e){i.state("ampAvailable").set(e.available)})),i.previewer.bind("amp-status",(function e(t){i.state("ampEnabled").set(t.enabled),i.previewer.unbind("amp-status",e)})),i.previewer.previewUrl.validate=(t=i.previewer.previewUrl.validate,function(e){var a=t.call(this,e);return a&&(a=o.setCurrentAmpUrl(a)),a}),i.state("ampEnabled").bind((function(e){r.prop("checked",e),o.updatePreviewUrl(),e&&"tablet"in i.settings.previewableDevices&&i.state("previewedDevice").set("tablet")})),i.state("ampAvailable").bind((function(e){r.toggleClass("disabled",!e),i.state("ampEnabled").get()&&o.tooltipVisible.set(!e)})),n(".devices-wrapper").prepend(a);var p=n(".collapse-sidebar.button"),c=p.find("> .collapse-sidebar-label"),d=function(){i.state("paneVisible").get()?p.prop("title",c.text()):p.prop("title",Object(l.__)("Show Controls","amp"))};d(),i.state("paneVisible").bind(d),u.on("click",(function(e){e.preventDefault(),o.enableAndNavigateToUrl(this.href)})),o.tooltipVisible.bind((function(e){s.attr("aria-hidden",e?"false":"true"),e?(n(document).on("click.amp-toggle-outside",(function(e){n.contains(a[0],e.target)||o.tooltipVisible.set(!1)})),s.fadeIn(),o.tryToCloseTooltip()):(s.fadeOut(),o.tooltipFocused.set(0),n(document).off("click.amp-toggle-outside"))})),r.on("click",(function(){this.checked=!this.checked,i.state("ampAvailable").get()?i.state("ampEnabled").set(!i.state("ampEnabled").get()):o.tooltipVisible.set(!0)})),s.on("mouseenter",(function(){i.state("ampAvailable").get()||o.tooltipVisible.set(!0),o.tooltipFocused.set(o.tooltipFocused.get()+1)})),s.on("mouseleave",(function(){o.tooltipFocused.set(o.tooltipFocused.get()-1)})),u.on("focus",(function(){i.state("ampAvailable").get()||o.tooltipVisible.set(!0),o.tooltipFocused.set(o.tooltipFocused.get()+1)})),u.on("blur",(function(){o.tooltipFocused.set(o.tooltipFocused.get()-1)}))}})}});